#@config Configuration for the SuperNEMO demonstrator geometry manager (snemo::demonstrator v. 5.0)

setup_label : string = "snemo::demonstrator"
setup_description : string = "SuperNEMO demonstrator module"
setup_version : string = "5.0"
factory.logging.priority : string = "fatal"
build_mapping : boolean = true
mapping.max_depth : integer = 0
plugins.force_initialization_at_load : boolean = true

# Models, mappings and plugins for "Basic" geometry
#@variant_if geometry:layout/if_basic|true

  # factory.geom_list : string as path = "@falaise:snemo/demonstrator/geometry/GeometryModels/Demonstrator.conf"

  #@allow_key_override
  
  #######################
  # Source frame layout #
  #######################

  factory.geom_files : string[1] as path = "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/source_module/source_calibration.geom"

  #@variant_if geometry:layout/if_basic/source_layout/if_basic|true				
  factory.geom_files : string[2] as path += \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/source_module/basic/source_pads.geom" \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/source_module/basic/source_strips.geom" 
  #@variant_endif
  
  #@variant_if !geometry:layout/if_basic/source_layout/if_basic|false

  # Shared models:
  factory.geom_files : string[4] as path += \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/source_module/realistic/source_copper_strips.geom"  \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/source_module/realistic/flat/source_strip_film.geom" \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/source_module/realistic/flat/source_lapp_strips_flat.geom" \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/source_module/realistic/flat/source_itep_strip2_flat.geom" 

    #@variant_if geometry:layout/if_basic/source_layout/if_realistic_flat|false
      # Specific models with flat ITEP source strips:
      factory.geom_files : string[1] as path += \
        "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/source_module/realistic/flat/source_itep_strips_flat.geom"
    #@variant_endif

    #@variant_if geometry:layout/if_basic/source_layout/if_realistic_snrs1|false
      # Specific models with deformed ITEP source strips:
      factory.geom_files : string[1] as path += \
        "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/source_module/realistic/snrs1/source_itep_strips_snrs1.geom"
    #@variant_endif

  #@variant_endif

  factory.geom_files : string[5] as path += \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/source_module/source_blocks.geom" \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/source_module/source_frame_horizontal_beams.geom" \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/source_module/source_frame_vertical_beams.geom" \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/source_module/source_foil_support.geom" \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/source_module/source_module.geom"

  ##################
  # Tracker layout #
  ##################
  factory.geom_files : string[10] as path += \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/tracker_modules/pmt_5inch.geom"   \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/tracker_modules/xwall_module.geom"  \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/tracker_modules/xwall.geom"	  \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/tracker_modules/gveto_module.geom"  \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/tracker_modules/gveto.geom"  \
    "@falaise:geometry/TrackerCellCore.conf"  \
    "@falaise:geometry/TrackerCell.conf"  \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/tracker_modules/tracker_layers.geom"  \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/tracker_modules/tracker_volumes.geom"  \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/tracker_modules/tracker_submodules.geom"


  ######################
  # Calorimeter layout #
  ######################
  factory.geom_files : string[7] as path += \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/calorimeter_modules/calo_pmt_8inch.geom" \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/calorimeter_modules/calo_pmt_5inch.geom" \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/calorimeter_modules/calorimeter_module_common.geom" \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/calorimeter_modules/calorimeter_module_5inch.geom" \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/calorimeter_modules/calorimeter_module_8inch.geom" \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/calorimeter_modules/calorimeter_walls.geom" \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/calorimeter_modules/calorimeter_submodules.geom"

  ####################
  # Shielding layout #
  ####################
  factory.geom_files : string[1] as path += \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/shielding/shielding.geom"

  #######################
  # Demonstrator layout #
  #######################
  factory.geom_files : string[1] as path += \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/basic_module_0.geom"

  ###############################
  # World and experimental hall #
  ###############################
  factory.geom_files : string[1] as path += \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/setup.geom"

  #@forbid_key_override
  
  # Argh... these lists DO NOT work in the same way as the above lists.
  # They are individual MP files so cannot concatenate (to give one for Demonstrator,
  # one for HalfCommissioning) without duplication....
  id_mgr.categories_lists : string[4] as path = \
    "@falaise:snemo/demonstrator/geometry/5.0/GeomIDMaps/setup_categories.lis" \
    "@falaise:snemo/demonstrator/geometry/5.0/GeomIDMaps/calorimeter_categories.lis" \
    "@falaise:snemo/demonstrator/geometry/5.0/GeomIDMaps/tracker_categories.lis" \
    "@falaise:snemo/demonstrator/geometry/5.0/GeomIDMaps/source_categories.lis"

  # Mag field only present in if_basic
  # Annoyingly, have to declare both in variant blocks because we cannot
  # override an already existing property
  #@variant_only geometry:layout/if_basic/magnetic_field/is_active|true
    plugins.configuration_files : string[3] as path = \
      "@falaise:snemo/demonstrator/geometry/5.0/GeometryPlugins/MaterialsPlugin.conf" \
      "@falaise:snemo/demonstrator/geometry/5.0/GeometryPlugins/LocatorPlugin.conf" \
      "@falaise:snemo/demonstrator/geometry/5.0/GeometryPlugins/MagneticFieldPlugin.conf"

  #@variant_only geometry:layout/if_basic/magnetic_field/is_inactive|false
    plugins.configuration_files : string[2] as path = \
      "@falaise:snemo/demonstrator/geometry/5.0/GeometryPlugins/MaterialsPlugin.conf" \
      "@falaise:snemo/demonstrator/geometry/5.0/GeometryPlugins/LocatorPlugin.conf"
#@variant_endif geometry:layout/if_basic


# Models, mappings and plugins for "HalfCommissioning" geometry
#@variant_if geometry:layout/if_half_commissioning|false
  factory.geom_list : string as path = "@falaise:snemo/demonstrator/geometry/5.0/GeometryModels/DemonstratorHalfCommissioning.conf"

  id_mgr.categories_lists : string[4] as path = \
    "@falaise:snemo/demonstrator/geometry/5.0/GeomIDMaps/setup_categories.lis" \
    "@falaise:snemo/demonstrator/geometry/5.0/GeomIDMaps/calorimeter_categories.lis" \
    "@falaise:snemo/demonstrator/geometry/5.0/GeomIDMaps/tracker_categories.lis" \
    "@falaise:snemo/demonstrator/geometry/5.0/GeomIDMaps/half_commissioning_categories.lis"

  plugins.configuration_files : string[2] as path = \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryPlugins/MaterialsPlugin.conf" \
    "@falaise:snemo/demonstrator/geometry/5.0/GeometryPlugins/LocatorPlugin.conf"
#@variant_endif geometry:layout/if_half_commissioning

